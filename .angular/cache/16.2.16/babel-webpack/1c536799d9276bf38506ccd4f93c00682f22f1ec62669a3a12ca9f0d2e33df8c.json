{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabio/Desktop/Projetos de Marlon Desenvolvimento Mobile/climaja-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/clima.service\";\nimport * as i2 from \"../services/historico.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@angular/common\";\nfunction HomePage_ion_list_16_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 15);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_list_16_ion_item_1_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const sugestao_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.selecionarSugestao(sugestao_r6));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 16);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const sugestao_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(sugestao_r6);\n  }\n}\nfunction HomePage_ion_list_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\", 13);\n    i0.ɵɵtemplate(1, HomePage_ion_list_16_ion_item_1_Template, 4, 1, \"ion-item\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.sugestoes);\n  }\n}\nfunction HomePage_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelement(1, \"ion-spinner\", 18);\n    i0.ɵɵelementStart(2, \"p\", 19);\n    i0.ɵɵtext(3, \"Carregando dados do clima...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomePage_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"h1\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 23)(5, \"span\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 25);\n    i0.ɵɵelement(9, \"img\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"p\", 27);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\", 28);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 29)(17, \"div\", 30)(18, \"div\", 31);\n    i0.ɵɵtext(19, \"Visibilidade\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 32);\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 30)(24, \"div\", 31);\n    i0.ɵɵtext(25, \"Umidade\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 32);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 30)(29, \"div\", 31);\n    i0.ɵɵtext(30, \"Press\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 32);\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 30)(34, \"div\", 31);\n    i0.ɵɵtext(35, \"Vento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 32);\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(38, \"ion-button\", 33);\n    i0.ɵɵlistener(\"click\", function HomePage_div_18_Template_ion_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.verDetalhes());\n    });\n    i0.ɵɵtext(39, \" Ver Detalhes Completos \");\n    i0.ɵɵelement(40, \"ion-icon\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.climaAtual.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(7, 10, ctx_r2.climaAtual.main.temp, \"1.0-0\"), \"\\u00B0C\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r2.getIconeClima(ctx_r2.climaAtual.weather[0].icon), i0.ɵɵsanitizeUrl)(\"alt\", ctx_r2.climaAtual.weather[0].description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(12, 13, ctx_r2.climaAtual.weather[0].description), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Sensa\\u00E7\\u00E3o t\\u00E9rmica \", i0.ɵɵpipeBind2(15, 15, ctx_r2.climaAtual.main.feels_like, \"1.0-0\"), \"\\u00B0C \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(22, 18, ctx_r2.climaAtual.visibility / 1000, \"1.1-1\"), \" km\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.climaAtual.main.humidity, \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.climaAtual.main.pressure, \" hPa\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.climaAtual.wind.speed, \" m/s\");\n  }\n}\nfunction HomePage_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"div\", 36);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Erro ao carregar dados\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-button\", 37);\n    i0.ɵɵlistener(\"click\", function HomePage_div_19_Template_ion_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.buscarClima());\n    });\n    i0.ɵɵtext(8, \" Tentar Novamente \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r3.erro);\n  }\n}\nfunction HomePage_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"div\", 39);\n    i0.ɵɵtext(2, \"\\uD83C\\uDF24\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"Bem-vindo ao ClimaJ\\u00E1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Busque por uma cidade para ver a previs\\u00E3o do tempo\");\n    i0.ɵɵelementEnd()();\n  }\n}\nlet HomePage = /*#__PURE__*/(() => {\n  class HomePage {\n    constructor(climaService, historicoService, router, loadingController, alertController) {\n      this.climaService = climaService;\n      this.historicoService = historicoService;\n      this.router = router;\n      this.loadingController = loadingController;\n      this.alertController = alertController;\n      // Propriedades para busca\n      this.cidade = '';\n      this.sugestoes = [];\n      // Dados do clima atual\n      this.climaAtual = null;\n      // Estados da aplicação\n      this.carregando = false;\n      this.erro = '';\n      this.searchTerm = new Subject();\n    }\n    ngOnInit() {\n      this.searchTerm.pipe(debounceTime(300), distinctUntilChanged()).subscribe(value => {\n        this.buscarSugestoes(value);\n      });\n    }\n    // Buscar clima por cidade\n    buscarClima() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log('Método buscarClima chamado com cidade:', _this.cidade);\n        if (!_this.cidade || !_this.cidade.trim()) {\n          _this.mostrarErro('Por favor, digite o nome de uma cidade');\n          return;\n        }\n        _this.carregando = true;\n        _this.erro = '';\n        _this.climaAtual = null;\n        try {\n          _this.sugestoes = [];\n          _this.climaService.getClima(_this.cidade.trim()).subscribe({\n            next: clima => {\n              console.log('Dados do clima recebidos:', clima);\n              _this.climaAtual = clima;\n              // Salvar no histórico usando o serviço\n              _this.historicoService.adicionarHistorico({\n                cidade: clima.name || _this.cidade,\n                temperatura: clima.main.temp,\n                descricao: clima.weather[0].description,\n                data: new Date().toISOString(),\n                icone: clima.weather[0].icon\n              });\n              _this.carregando = false;\n              console.log('Busca concluída com sucesso');\n            },\n            error: error => {\n              console.error('Erro ao buscar clima:', error);\n              _this.erro = 'Cidade não encontrada. Verifique o nome e tente novamente.';\n              _this.carregando = false;\n              _this.climaAtual = null;\n            }\n          });\n        } catch (error) {\n          console.error('Erro inesperado:', error);\n          _this.erro = 'Erro inesperado. Tente novamente.';\n          _this.carregando = false;\n          _this.climaAtual = null;\n        }\n      })();\n    }\n    // Navegar para detalhes\n    verDetalhes() {\n      if (this.climaAtual) {\n        this.router.navigate(['/detalhes-clima'], {\n          queryParams: {\n            cidade: this.climaAtual.name\n          }\n        });\n      }\n    }\n    // Mostrar erro\n    mostrarErro(mensagem) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const alert = yield _this2.alertController.create({\n          header: 'Erro',\n          message: mensagem,\n          buttons: ['OK']\n        });\n        yield alert.present();\n      })();\n    }\n    // Obter URL do ícone do clima\n    getIconeClima(icone) {\n      return `https://openweathermap.org/img/wn/${icone}@2x.png`;\n    }\n    // Manipular entrada de busca e gerar sugestões\n    onSearchInput(event) {\n      const value = event.target.value;\n      this.searchTerm.next(value);\n    }\n    buscarSugestoes(cidade) {\n      if (cidade.trim() === '') {\n        this.sugestoes = [];\n        return;\n      }\n      this.climaService.getSugestoes(cidade).subscribe({\n        next: sugestoes => {\n          this.sugestoes = sugestoes.map(sugestao => `${sugestao.name}, ${sugestao.country}`);\n        },\n        error: error => {\n          console.error('Erro ao buscar sugestões:', error);\n          this.sugestoes = [];\n        }\n      });\n    }\n    // Selecionar sugestão\n    selecionarSugestao(sugestao) {\n      this.cidade = sugestao;\n      this.sugestoes = [];\n      this.buscarClima();\n    }\n    onInputChange(event) {\n      this.cidade = event.target.value;\n    }\n    static {\n      this.ɵfac = function HomePage_Factory(t) {\n        return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.ClimaService), i0.ɵɵdirectiveInject(i2.HistoricoService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.LoadingController), i0.ɵɵdirectiveInject(i4.AlertController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HomePage,\n        selectors: [[\"app-home\"]],\n        decls: 21,\n        vars: 6,\n        consts: [[\"slot\", \"start\"], [1, \"google-style-container\"], [1, \"logo-container\"], [1, \"app-title\"], [1, \"search-section\"], [\"placeholder\", \"Buscar cidade...\", \"debounce\", \"300\", \"showCancelButton\", \"never\", \"clearIcon\", \"close-outline\", 1, \"custom-searchbar\", 3, \"value\", \"keyup.enter\", \"input\", \"ionInput\"], [1, \"app-info\"], [1, \"app-subtitle\"], [\"class\", \"suggestions-list\", 4, \"ngIf\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"main-weather animate-in\", 4, \"ngIf\"], [\"class\", \"glass-card error-state\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"suggestions-list\"], [\"button\", \"\", \"class\", \"suggestion-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"suggestion-item\", 3, \"click\"], [\"name\", \"location-outline\", \"slot\", \"start\"], [1, \"loading-container\"], [\"name\", \"crescent\", \"color\", \"primary\"], [1, \"loading-text\"], [1, \"main-weather\", \"animate-in\"], [1, \"location-section\"], [1, \"city-name\"], [1, \"temperature-section\"], [1, \"temperature-display\"], [1, \"weather-icon-container\"], [1, \"main-weather-icon\", 3, \"src\", \"alt\"], [1, \"weather-description\"], [1, \"feels-like\"], [1, \"glass-card\", \"weather-details\"], [1, \"detail-card\"], [1, \"detail-label\"], [1, \"detail-value\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"details-btn\", 3, \"click\"], [\"name\", \"chevron-forward-outline\", \"slot\", \"end\"], [1, \"glass-card\", \"error-state\"], [1, \"error-icon\"], [\"fill\", \"clear\", 3, \"click\"], [1, \"empty-state\"], [1, \"empty-icon\"]],\n        template: function HomePage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n            i0.ɵɵelement(3, \"ion-menu-button\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(4, \"ion-content\")(5, \"div\", 1)(6, \"div\", 2)(7, \"h1\", 3);\n            i0.ɵɵtext(8, \"ClimaJ\\u00E1\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 4)(10, \"ion-searchbar\", 5);\n            i0.ɵɵlistener(\"keyup.enter\", function HomePage_Template_ion_searchbar_keyup_enter_10_listener() {\n              return ctx.buscarClima();\n            })(\"input\", function HomePage_Template_ion_searchbar_input_10_listener($event) {\n              return ctx.onInputChange($event);\n            })(\"ionInput\", function HomePage_Template_ion_searchbar_ionInput_10_listener($event) {\n              return ctx.onSearchInput($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 6)(12, \"h1\", 3);\n            i0.ɵɵtext(13, \"ClimaJ\\u00E1 \\uD83C\\uDF24\\uFE0F\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"p\", 7);\n            i0.ɵɵtext(15, \"Previs\\u00E3o do Tempo\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(16, HomePage_ion_list_16_Template, 2, 1, \"ion-list\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, HomePage_div_17_Template, 4, 0, \"div\", 9);\n            i0.ɵɵtemplate(18, HomePage_div_18_Template, 41, 21, \"div\", 10);\n            i0.ɵɵtemplate(19, HomePage_div_19_Template, 9, 1, \"div\", 11);\n            i0.ɵɵtemplate(20, HomePage_div_20_Template, 7, 0, \"div\", 12);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"value\", ctx.cidade);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.sugestoes.length > 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.carregando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.climaAtual && !ctx.carregando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.erro && !ctx.carregando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.climaAtual && !ctx.carregando && !ctx.erro);\n          }\n        },\n        dependencies: [i5.NgForOf, i5.NgIf, i4.IonButton, i4.IonButtons, i4.IonContent, i4.IonHeader, i4.IonIcon, i4.IonItem, i4.IonLabel, i4.IonList, i4.IonMenuButton, i4.IonSearchbar, i4.IonSpinner, i4.IonToolbar, i4.TextValueAccessor, i5.DecimalPipe, i5.TitleCasePipe],\n        styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({132: (() => {throw new Error('Module build failed (from ./node_modules/sass-loader/dist/cjs.js):nexpected \\\"}\\\".n    \\\\2577n546 \\\\2502  }rn    \\\\2502   ^n    \\\\2575n  src\\\\\\\\app\\\\\\\\home\\\\\\\\home.page.scss 546:2  root stylesheet');})})[_ngcontent-%COMP%]; //[_ngcontent-%COMP%]   startup[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   Load[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   and[_ngcontent-%COMP%]   return[_ngcontent-%COMP%]   exports[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   This[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   doesn\\\"t[_ngcontent-%COMP%]   tell[_ngcontent-%COMP%]   about[_ngcontent-%COMP%]   it\\\"s[_ngcontent-%COMP%]   top-level[_ngcontent-%COMP%]   declarations[_ngcontent-%COMP%]   so[_ngcontent-%COMP%]   it[_ngcontent-%COMP%]   can't[_ngcontent-%COMP%]   be[_ngcontent-%COMP%]   inlined\\nvar[_ngcontent-%COMP%]   __webpack_exports__[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] {}; __webpack_modules__[132](); resource = __webpack_exports__;})()[_ngcontent-%COMP%]   ;[_ngcontent-%COMP%]{}\"]\n      });\n    }\n  }\n  return HomePage;\n})();\nexport { HomePage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}