{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fabio/Desktop/Projetos de Marlon Desenvolvimento Mobile/climaja-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/clima.service\";\nimport * as i2 from \"../services/historico.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../directives/highlight.directive\";\nimport * as i8 from \"../pipes/temperatura.pipe\";\nfunction HomePage_ion_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 17);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_button_27_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.limpar());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 18);\n    i0.ɵɵtext(2, \" Limpar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomePage_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelement(1, \"ion-spinner\", 20);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Buscando dados do clima...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomePage_ion_card_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 21)(1, \"ion-card-content\");\n    i0.ɵɵelement(2, \"ion-icon\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.erro, \" \");\n  }\n}\nfunction HomePage_ion_card_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 23)(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-card-subtitle\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"titlecase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-card-content\")(8, \"div\", 24)(9, \"div\", 25);\n    i0.ɵɵelement(10, \"img\", 26);\n    i0.ɵɵelementStart(11, \"div\", 27);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"temperatura\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 28)(15, \"div\", 29);\n    i0.ɵɵelement(16, \"ion-icon\", 30);\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"temperatura\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 29);\n    i0.ɵɵelement(21, \"ion-icon\", 31);\n    i0.ɵɵelementStart(22, \"span\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 29);\n    i0.ɵɵelement(25, \"ion-icon\", 32);\n    i0.ɵɵelementStart(26, \"span\");\n    i0.ɵɵtext(27);\n    i0.ɵɵpipe(28, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 29);\n    i0.ɵɵelement(30, \"ion-icon\", 33);\n    i0.ɵɵelementStart(31, \"span\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\", 34)(34, \"ion-button\", 35);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_card_30_Template_ion_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.verDetalhes());\n    });\n    i0.ɵɵelement(35, \"ion-icon\", 36);\n    i0.ɵɵtext(36, \" Ver Detalhes Completos \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.climaAtual.name, \", \", ctx_r3.climaAtual.sys.country, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 10, ctx_r3.climaAtual.weather[0].description));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", \"https://openweathermap.org/img/wn/\" + ctx_r3.climaAtual.weather[0].icon + \"@2x.png\", i0.ɵɵsanitizeUrl)(\"alt\", ctx_r3.climaAtual.weather[0].description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 12, ctx_r3.climaAtual.main.temp), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Sensa\\u00E7\\u00E3o: \", i0.ɵɵpipeBind1(19, 14, ctx_r3.climaAtual.main.feels_like), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Umidade: \", ctx_r3.climaAtual.main.humidity, \"%\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Visibilidade: \", i0.ɵɵpipeBind2(28, 16, ctx_r3.climaAtual.visibility / 1000, \"1.0-1\"), \"km\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Press\\u00E3o: \", ctx_r3.climaAtual.main.pressure, \"hPa\");\n  }\n}\nfunction HomePage_ion_card_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 37)(1, \"ion-card-content\")(2, \"div\", 38);\n    i0.ɵɵelement(3, \"ion-icon\", 39);\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵtext(5, \"Bem-vindo ao ClimaJ\\u00E1!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7, \"Digite o nome de uma cidade para obter informa\\u00E7\\u00F5es meteorol\\u00F3gicas em tempo real.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\")(9, \"small\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\"\\u00DAltima atualiza\\u00E7\\u00E3o: \", i0.ɵɵpipeBind2(11, 1, ctx_r4.dataAtual, \"dd/MM/yyyy HH:mm\"), \"\");\n  }\n}\nexport let HomePage = /*#__PURE__*/(() => {\n  class HomePage {\n    constructor(climaService, historicoService, router) {\n      this.climaService = climaService;\n      this.historicoService = historicoService;\n      this.router = router;\n      // Cidade pesquisada pelo usuário\n      this.cidade = '';\n      // Data atual para exibição\n      this.dataAtual = new Date();\n      // Dados do clima atual\n      this.climaAtual = null;\n      // Estado de carregamento\n      this.carregando = false;\n      // Mensagem de erro\n      this.erro = '';\n    }\n    ngOnInit() {\n      // Tenta obter a localização do usuário ao iniciar\n      this.obterLocalizacaoAtual();\n    }\n    /**\r\n     * Busca o clima para a cidade informada\r\n     */\n    buscarClima() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.cidade.trim()) {\n          _this.erro = 'Por favor, informe uma cidade';\n          return;\n        }\n        _this.carregando = true;\n        _this.erro = '';\n        try {\n          const resultado = yield _this.climaService.getClimaAtual(_this.cidade).toPromise();\n          _this.climaAtual = resultado;\n          // Adiciona ao histórico\n          const historicoItem = {\n            cidade: _this.cidade,\n            temperatura: resultado.main.temp,\n            descricao: resultado.weather[0].description,\n            data: new Date(),\n            icone: resultado.weather[0].icon\n          };\n          _this.historicoService.adicionarAoHistorico(historicoItem);\n        } catch (error) {\n          _this.erro = 'Erro ao buscar dados do clima. Verifique o nome da cidade.';\n          _this.climaAtual = null;\n        } finally {\n          _this.carregando = false;\n        }\n      })();\n    }\n    /**\r\n     * Obtém a localização atual do usuário\r\n     */\n    obterLocalizacaoAtual() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          this.buscarClimaPorCoordenadas(position.coords.latitude, position.coords.longitude);\n        }, error => {\n          console.log('Erro ao obter localização:', error);\n        });\n      }\n    }\n    /**\r\n     * Busca o clima usando coordenadas geográficas\r\n     */\n    buscarClimaPorCoordenadas(lat, lon) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.carregando = true;\n        try {\n          const resultado = yield _this2.climaService.getClimaPorCoordenadas(lat, lon).toPromise();\n          _this2.climaAtual = resultado;\n          _this2.cidade = resultado.name;\n        } catch (error) {\n          console.error('Erro ao buscar clima por coordenadas:', error);\n        } finally {\n          _this2.carregando = false;\n        }\n      })();\n    }\n    /**\r\n     * Navega para a página de detalhes do clima\r\n     */\n    verDetalhes() {\n      if (this.cidade) {\n        this.router.navigate(['/detalhes-clima', this.cidade]);\n      }\n    }\n    /**\r\n     * Limpa os dados da busca\r\n     */\n    limpar() {\n      this.cidade = '';\n      this.climaAtual = null;\n      this.erro = '';\n    }\n    static {\n      this.ɵfac = function HomePage_Factory(t) {\n        return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.ClimaService), i0.ɵɵdirectiveInject(i2.HistoricoService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HomePage,\n        selectors: [[\"app-home\"]],\n        decls: 32,\n        vars: 9,\n        consts: [[3, \"translucent\"], [\"slot\", \"start\"], [3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [1, \"container\"], [\"appHighlight\", \"lightblue\", 1, \"search-card\"], [\"position\", \"floating\"], [\"placeholder\", \"Ex: S\\u00E3o Paulo\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"button-container\"], [\"expand\", \"block\", 3, \"disabled\", \"click\"], [\"name\", \"search\", \"slot\", \"start\"], [\"fill\", \"outline\", \"expand\", \"block\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"color\", \"danger\", 4, \"ngIf\"], [\"class\", \"weather-card\", \"appHighlight\", \"lightyellow\", 4, \"ngIf\"], [\"class\", \"info-card\", 4, \"ngIf\"], [\"fill\", \"outline\", \"expand\", \"block\", 3, \"click\"], [\"name\", \"refresh\", \"slot\", \"start\"], [1, \"loading-container\"], [\"name\", \"crescent\"], [\"color\", \"danger\"], [\"name\", \"alert-circle\", \"slot\", \"start\"], [\"appHighlight\", \"lightyellow\", 1, \"weather-card\"], [1, \"weather-info\"], [1, \"temperature-section\"], [1, \"weather-icon\", 3, \"src\", \"alt\"], [1, \"temperature\"], [1, \"details-grid\"], [1, \"detail-item\"], [\"name\", \"thermometer\"], [\"name\", \"water\"], [\"name\", \"eye\"], [\"name\", \"speedometer\"], [1, \"action-buttons\"], [\"expand\", \"block\", \"fill\", \"outline\", 3, \"click\"], [\"name\", \"information-circle\", \"slot\", \"start\"], [1, \"info-card\"], [1, \"welcome-content\"], [\"name\", \"sunny\", \"size\", \"large\", \"color\", \"warning\"]],\n        template: function HomePage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1);\n            i0.ɵɵelement(3, \"ion-menu-button\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"ion-title\");\n            i0.ɵɵtext(5, \" ClimaJ\\u00E1 - In\\u00EDcio \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(6, \"ion-content\", 2)(7, \"ion-header\", 3)(8, \"ion-toolbar\")(9, \"ion-title\", 4);\n            i0.ɵɵtext(10, \"ClimaJ\\u00E1\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(11, \"div\", 5)(12, \"ion-card\", 6)(13, \"ion-card-header\")(14, \"ion-card-title\");\n            i0.ɵɵtext(15, \"Buscar Clima\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"ion-card-subtitle\");\n            i0.ɵɵtext(17, \"Digite o nome da cidade\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"ion-card-content\")(19, \"ion-item\")(20, \"ion-label\", 7);\n            i0.ɵɵtext(21, \"Nome da Cidade\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"ion-input\", 8);\n            i0.ɵɵlistener(\"ngModelChange\", function HomePage_Template_ion_input_ngModelChange_22_listener($event) {\n              return ctx.cidade = $event;\n            })(\"keyup.enter\", function HomePage_Template_ion_input_keyup_enter_22_listener() {\n              return ctx.buscarClima();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(23, \"div\", 9)(24, \"ion-button\", 10);\n            i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_24_listener() {\n              return ctx.buscarClima();\n            });\n            i0.ɵɵelement(25, \"ion-icon\", 11);\n            i0.ɵɵtext(26, \" Buscar \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(27, HomePage_ion_button_27_Template, 3, 0, \"ion-button\", 12);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(28, HomePage_div_28_Template, 4, 0, \"div\", 13);\n            i0.ɵɵtemplate(29, HomePage_ion_card_29_Template, 4, 1, \"ion-card\", 14);\n            i0.ɵɵtemplate(30, HomePage_ion_card_30_Template, 37, 19, \"ion-card\", 15);\n            i0.ɵɵtemplate(31, HomePage_ion_card_31_Template, 12, 4, \"ion-card\", 16);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"translucent\", true);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"fullscreen\", true);\n            i0.ɵɵadvance(16);\n            i0.ɵɵproperty(\"ngModel\", ctx.cidade);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.carregando);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.climaAtual || ctx.erro);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.carregando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.erro);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.climaAtual && !ctx.carregando);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.climaAtual && !ctx.carregando && !ctx.erro);\n          }\n        },\n        dependencies: [i4.NgIf, i5.IonButton, i5.IonButtons, i5.IonCard, i5.IonCardContent, i5.IonCardHeader, i5.IonCardSubtitle, i5.IonCardTitle, i5.IonContent, i5.IonHeader, i5.IonIcon, i5.IonInput, i5.IonItem, i5.IonLabel, i5.IonMenuButton, i5.IonSpinner, i5.IonTitle, i5.IonToolbar, i5.TextValueAccessor, i6.NgControlStatus, i6.NgModel, i7.HighlightDirective, i4.DecimalPipe, i4.TitleCasePipe, i4.DatePipe, i8.TemperaturaPipe],\n        styles: [\".container[_ngcontent-%COMP%]{padding:16px}.search-card[_ngcontent-%COMP%]{margin-bottom:20px}.button-container[_ngcontent-%COMP%]{margin-top:16px}.button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:8px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-style:italic}.weather-card[_ngcontent-%COMP%]{margin-bottom:20px}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin-right:16px}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .temperature[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--ion-color-primary)}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;background:var(--ion-color-light);border-radius:8px}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;color:var(--ion-color-primary)}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-dark)}.weather-card[_ngcontent-%COMP%]   .weather-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:20px}.info-card[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.info-card[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-bottom:16px}.info-card[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary);margin-bottom:16px}.info-card[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);line-height:1.5}.info-card[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium-shade)}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.details-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)!important}}.weather-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@media (hover: hover){ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);transition:transform .2s ease}}\"]\n      });\n    }\n  }\n  return HomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}