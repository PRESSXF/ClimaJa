"use strict";(self.webpackChunkclimaja_app=self.webpackChunkclimaja_app||[]).push([[7086],{7086:(U,f,i)=>{i.r(f),i.d(f,{HomePageModule:()=>G});var g=i(177),c=i(8974),p=i(4341),d=i(3833),h=i(467),P=i(3888),M=i(9974),x=i(4360),v=i(3294),b=i(1413),t=i(6276),C=i(4887),w=i(8168),y=i(7690);function F(o,l){if(1&o){const e=t.RV6();t.j41(0,"div",16)(1,"p",17),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.nrm(4,"img",18),t.j41(5,"p",19),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"button",15),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.verDetalhes(s))}),t.EFF(9,"Ver Detalhes"),t.k0s()()}if(2&o){const e=l.$implicit,n=t.XpG(2);t.R7$(2),t.JRh(t.i5U(3,4,e.dt_txt,"dd/MM")),t.R7$(2),t.Y8G("src",n.getIconeClima(e.weather[0].icon),t.B4B)("alt",e.weather[0].description),t.R7$(2),t.SpI("",t.i5U(7,7,e.main.temp,"1.0-0"),"\xb0C")}}function k(o,l){if(1&o){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h1",3),t.EFF(3),t.k0s(),t.j41(4,"div",4)(5,"span",5),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"div",6),t.nrm(9,"img",7),t.k0s()(),t.j41(10,"p",8),t.EFF(11),t.nI1(12,"titlecase"),t.k0s(),t.j41(13,"p",9),t.EFF(14),t.nI1(15,"number"),t.k0s(),t.j41(16,"div",10)(17,"div",11),t.EFF(18," Umidade: "),t.j41(19,"span"),t.EFF(20),t.k0s()(),t.j41(21,"div",11),t.EFF(22," Vento: "),t.j41(23,"span"),t.EFF(24),t.k0s()()()(),t.j41(25,"div",12)(26,"div",13),t.DNE(27,F,10,10,"div",14),t.k0s()(),t.j41(28,"button",15),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onDefinirLocalizacaoAtual())}),t.EFF(29,"Definir como Localiza\xe7\xe3o Atual!"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(3),t.JRh(e.climaAtual.name),t.R7$(3),t.SpI("",t.i5U(7,9,e.climaAtual.main.temp,"1.0-0"),"\xb0C"),t.R7$(3),t.Y8G("src",e.getIconeClima(e.climaAtual.weather[0].icon),t.B4B)("alt",e.climaAtual.weather[0].description),t.R7$(2),t.SpI(" ",t.bMT(12,12,e.climaAtual.weather[0].description)," "),t.R7$(3),t.SpI(" Sensa\xe7\xe3o t\xe9rmica: ",t.i5U(15,14,e.climaAtual.main.feels_like,"1.0-0"),"\xb0C "),t.R7$(6),t.SpI("",e.climaAtual.main.humidity,"% de umidade"),t.R7$(4),t.SpI("",e.climaAtual.wind.speed," m/s"),t.R7$(3),t.Y8G("ngForOf",e.forecastData)}}let j=(()=>{class o{constructor(e,n){this.climaService=e,this.router=n,this.definirLocalizacao=new t.bkB,this.forecastData=[]}ngOnInit(){this.climaAtual&&this.climaService.getPrevisao(this.climaAtual.name).subscribe(e=>{this.forecastData=e.list})}getIconeClima(e){return`https://openweathermap.org/img/wn/${e}@2x.png`}verDetalhes(e){this.router.navigate(["/detalhes-clima"],{queryParams:{cidade:this.climaAtual.name,data:e.dt_txt}})}onDefinirLocalizacaoAtual(){this.definirLocalizacao.emit(this.climaAtual)}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(C.M),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-current-weather"]],inputs:{climaAtual:"climaAtual"},outputs:{definirLocalizacao:"definirLocalizacao"},decls:1,vars:1,consts:[["class","current-weather",4,"ngIf"],[1,"current-weather"],[1,"location-section"],[1,"city-name"],[1,"temperature-section"],[1,"temperature-display"],[1,"weather-icon-container"],[1,"main-weather-icon",3,"src","alt"],[1,"weather-description"],[1,"feels-like"],[1,"details-section"],[1,"detail-item"],[1,"forecast-section"],[1,"forecast-list"],["class","forecast-item",4,"ngFor","ngForOf"],[3,"click"],[1,"forecast-item"],[1,"forecast-date"],[3,"src","alt"],[1,"forecast-temp"]],template:function(n,a){1&n&&t.DNE(0,k,30,17,"div",0),2&n&&t.Y8G("ngIf",a.climaAtual)},dependencies:[g.Sq,g.bT,g.QX,g.PV,g.vh],styles:[".current-weather[_ngcontent-%COMP%]{margin-top:20px;padding:20px;border-radius:10px;background-color:#ffffff1a;box-shadow:0 4px 6px #0000001a;color:#fff}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]{text-align:center}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .city-name[_ngcontent-%COMP%]{font-size:2em;margin-bottom:5px}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .temperature-display[_ngcontent-%COMP%]{font-size:3em;margin-right:10px}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .weather-icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .weather-description[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .feels-like[_ngcontent-%COMP%]{font-size:.9em}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:15px}.current-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{font-size:.8em}"]})}}return o})();function E(o,l){if(1&o){const e=t.RV6();t.j41(0,"ion-item",13),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.selecionarSugestao(s))}),t.EFF(1),t.k0s()}if(2&o){const e=l.$implicit;t.R7$(1),t.SpI(" ",e," ")}}function I(o,l){if(1&o&&(t.j41(0,"ion-list"),t.DNE(1,E,2,1,"ion-item",12),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.sugestoes)}}function z(o,l){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"div",15),t.EFF(2,"\u26a0\ufe0f"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"Erro ao carregar os dados"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"ion-button",16),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.buscarClima())}),t.EFF(8," Tentar Novamente! "),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(6),t.JRh(e.erro)}}function T(o,l){1&o&&(t.j41(0,"div",17),t.nrm(1,"ion-spinner",18),t.k0s())}const A=[{path:"",component:(()=>{class o{constructor(e,n,a,s,r,u){this.climaService=e,this.historicoService=n,this.localizacaoService=a,this.router=s,this.alertController=r,this.toastController=u,this.cidade="",this.sugestoes=[],this.climaAtual=null,this.carregando=!1,this.erro="",this.searchTerm=new b.B}ngOnInit(){this.searchTerm.pipe(function O(o,l=P.E){return(0,M.N)((e,n)=>{let a=null,s=null,r=null;const u=()=>{if(a){a.unsubscribe(),a=null;const m=s;s=null,n.next(m)}};function D(){const m=r+o,_=l.now();if(_<m)return a=this.schedule(void 0,m-_),void n.add(a);u()}e.subscribe((0,x._)(n,m=>{s=m,r=l.now(),a||(a=l.schedule(D,o),n.add(a))},()=>{u(),n.complete()},void 0,()=>{s=a=null}))})}(300),(0,v.F)()).subscribe(e=>{this.buscarSugestoes(e)})}buscarClima(){var e=this;return(0,h.A)(function*(){if(console.log("M\xe9todo buscarClima() chamado!"),console.log("Cidade:",e.cidade),e.cidade&&e.cidade.trim()){e.carregando=!0,e.erro="",e.climaAtual=null;try{e.sugestoes=[],e.climaService.getClima(e.cidade.trim()).subscribe({next:n=>{console.log("Dados do clima recebidos:",n),e.climaAtual=n,e.historicoService.adicionarHistorico({cidade:n.name||e.cidade,temperatura:n.main.temp,descricao:n.weather[0].description,data:(new Date).toISOString(),icone:n.weather[0].icon}),e.carregando=!1,console.log("Busca conclu\xedda com sucesso"),e.mostrarToast("Clima de "+e.cidade+" carregado com sucesso!","success")},error:n=>{console.error("Erro ao buscar clima:",n),e.erro="Cidade n\xe3o encontrada. Verifique o nome e tente novamente.",e.carregando=!1,e.climaAtual=null,e.mostrarToast(e.erro,"danger")}})}catch(n){console.error("Erro inesperado:",n),e.erro="Erro inesperado. Tente novamente.",e.carregando=!1,e.climaAtual=null,e.mostrarToast(e.erro,"danger")}}else e.mostrarErro("Por favor, digite o nome de uma cidade")})()}mostrarErro(e){var n=this;return(0,h.A)(function*(){yield(yield n.alertController.create({header:"Erro",message:e,buttons:["OK"]})).present()})()}mostrarToast(e,n){var a=this;return(0,h.A)(function*(){(yield a.toastController.create({message:e,duration:2e3,color:n})).present()})()}getIconeClima(e){return`https://openweathermap.org/img/wn/${e}@2x.png`}onSearchInput(e){this.searchTerm.next(e.target.value)}buscarSugestoes(e){""!==e.trim()?this.climaService.getSugestoes(e).subscribe({next:n=>{this.sugestoes=n.map(a=>`${a.name}, ${a.country}`)},error:n=>{console.error("Erro ao buscar sugest\xf5es:",n),this.sugestoes=[]}}):this.sugestoes=[]}selecionarSugestao(e){this.cidade=e,this.buscarClima()}onInputChange(e){this.cidade=e.target.value}onKeyPress(e){console.log("onKeyPress chamado!"),"Enter"===e.key&&this.buscarClima()}definirLocalizacaoAtual(e){e?(this.localizacaoService.definirLocalizacaoAtual(e.name),console.log("Localiza\xe7\xe3o atual definida:",e.name),this.mostrarToast(`Localiza\xe7\xe3o atual definida como ${e.name}`,"success")):this.mostrarErro("Por favor, digite o nome de uma cidade")}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(C.M),t.rXU(w._),t.rXU(y.k),t.rXU(d.Ix),t.rXU(c.hG),t.rXU(c.K_))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-home"]],decls:20,vars:5,consts:[["slot","start"],[1,"google-style-container"],[1,"app-info"],[1,"app-title"],[1,"app-subtitle"],[1,"ion-padding"],["position","floating"],["type","text",3,"ngModel","ngModelChange","ionInput","keyup"],[4,"ngIf"],[3,"climaAtual","definirLocalizacao"],["class","glass-card error-state",4,"ngIf"],["class","loading-container",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"glass-card","error-state"],[1,"error-icon"],["fill","clear",3,"click"],[1,"loading-container"],["name","crescent","color","primary"]],template:function(n,a){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-menu-button"),t.k0s()()(),t.j41(4,"ion-content")(5,"div",1)(6,"div",2)(7,"h1",3),t.EFF(8,"ClimaJ\xe1 \u{1f324}\ufe0f"),t.k0s(),t.j41(9,"p",4),t.EFF(10,"Previs\xe3o do Tempo!"),t.k0s()(),t.j41(11,"ion-content",5)(12,"ion-item")(13,"ion-label",6),t.EFF(14,"Digite o nome da cidade:"),t.k0s(),t.j41(15,"ion-input",7),t.bIt("ngModelChange",function(r){return a.cidade=r})("ionInput",function(r){return a.onSearchInput(r)})("keyup",function(r){return a.onKeyPress(r)}),t.k0s()(),t.DNE(16,I,2,1,"ion-list",8),t.j41(17,"app-current-weather",9),t.bIt("definirLocalizacao",function(r){return a.definirLocalizacaoAtual(r)}),t.k0s()(),t.DNE(18,z,9,1,"div",10),t.k0s(),t.DNE(19,T,2,0,"div",11),t.k0s()),2&n&&(t.R7$(15),t.Y8G("ngModel",a.cidade),t.R7$(1),t.Y8G("ngIf",a.sugestoes.length>0),t.R7$(1),t.Y8G("climaAtual",a.climaAtual),t.R7$(1),t.Y8G("ngIf",a.erro),t.R7$(1),t.Y8G("ngIf",a.carregando))},dependencies:[c.Jm,c.QW,c.W9,c.eU,c.$w,c.uz,c.he,c.nf,c.MC,c.w2,c.ai,c.Gw,g.Sq,g.bT,p.BC,p.vS,j],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color);display:flex;flex-direction:column;height:100%}.google-style-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:100%;padding:20px}.logo-container[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.logo-container[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:8px}.search-section[_ngcontent-%COMP%]{width:100%;max-width:584px;margin:0 auto;padding:0 16px;position:relative;z-index:2}.search-section[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.search-section[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:8px}.search-section[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .app-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium)}ion-searchbar[_ngcontent-%COMP%]{--background: #fff;--border-radius: 24px;--box-shadow: 0 2px 5px rgba(0, 0, 0, .1);--placeholder-color: #5f6368;--color: #202124;--icon-color: #9aa0a6;height:44px;padding:0}ion-searchbar[_ngcontent-%COMP%]::part(container){height:44px}ion-searchbar[_ngcontent-%COMP%]::part(search-icon){color:#9aa0a6}ion-searchbar[_ngcontent-%COMP%]:hover{--box-shadow: 0 3px 8px rgba(0, 0, 0, .15)}.suggestions-list[_ngcontent-%COMP%]{position:absolute;top:52px;left:16px;right:16px;max-width:584px;margin:0 auto;background:#fff;border-radius:0 0 24px 24px;box-shadow:0 4px 6px #0000001a;z-index:1}.suggestion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 48px;--background: transparent;--color: #202124;font-size:14px}.suggestion-item[_ngcontent-%COMP%]:hover{--background: #f8f9fa}.suggestion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#9aa0a6;margin-right:12px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;gap:16px;margin-top:32px}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.main-weather[_ngcontent-%COMP%]{padding:16px;margin-top:32px;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .city-name[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px;color:var(--text-primary)}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .temperature-display[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:var(--text-primary)}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .weather-icon-container[_ngcontent-%COMP%]{width:64px;height:64px}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .temperature-section[_ngcontent-%COMP%]   .weather-icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .weather-description[_ngcontent-%COMP%]{font-size:18px;margin:8px 0;color:var(--text-primary)}.main-weather[_ngcontent-%COMP%]   .location-section[_ngcontent-%COMP%]   .feels-like[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.glass-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:16px;margin:16px}.weather-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.detail-card[_ngcontent-%COMP%]{text-align:center;padding:12px}.detail-label[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;margin-bottom:4px}.detail-value[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.details-btn[_ngcontent-%COMP%]{margin:16px}.error-state[_ngcontent-%COMP%]{text-align:center;padding:32px 16px}.error-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}h3[_ngcontent-%COMP%]{color:var(--ion-color-danger);margin-bottom:8px}p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})}}return o})()}];let S=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(A),d.iI]})}}return o})();var $=i(3887),R=i(4047);let G=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[c.bv,g.MD,p.YN,S,$.G,R.ResultadosBuscaModule]})}}return o})()}}]);